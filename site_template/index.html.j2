{% set title = "RV Dashboard" %}
{% set heading = "RV Dashboard" %}
{% extends "base.html.j2" %}
{% block content %}
<div class="card">
  <strong>Total projects:</strong> {{ projects|length }}
  &nbsp;•&nbsp;
  <strong>Total commits:</strong> {{ total_commits }}
  &nbsp;•&nbsp;
  <strong>Total unique locations:</strong> {{ total_locations }}
</div>

<div class="grid">
  {% for p in projects %}
  <div class="card">
    <h3><a class="nowrap" href="./projects/{{ p.slug }}/index.html">{{ p.full_name }}</a></h3>
    <div class="muted">Latest history artifact: {{ p.latest_artifact_name or "N/A" }}</div>
    <div class="muted">Latest commit: {{ p.latest_commit or "N/A" }}</div>
    <div style="margin-top:8px;">
      <span class="pill">Commits: {{ p.commit_count }}</span>
      <span class="pill">Unique locations: {{ p.location_count }}</span>
    </div>
    {% if p.csv_source %}
      <div style="margin-top:8px;"><a href="{{ p.csv_source }}">Original CSV</a></div>
    {% endif %}
  </div>
  {% endfor %}
</div>
{% endblock %}
